<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>mLab - OpenAPS Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">OpenAPS Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Prepare <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../prep/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../prep/gitter/">Get connected</a>
</li>

                    
                        
<li >
    <a href="../../prep/settings/">Test your pump</a>
</li>

                    
                        
<li >
    <a href="../../prep/gear/">Buy the gear</a>
</li>

                    
                        
<li >
    <a href="../../prep/wifi/">Wifi Networks</a>
</li>

                    
                        
<li >
    <a href="../../prep/hotspot/">Mobile Hotspot</a>
</li>

                    
                        
<li >
    <a href="../../prep/linux/">Linux Basics</a>
</li>

                    
                        
<li >
    <a href="../../prep/oref0/">GitHub and OpenAPS</a>
</li>

                    
                        
<li >
    <a href="../../prep/file-structure/">Navigating your rig</a>
</li>

                    
                        
<li >
    <a href="../../prep/advanced-features/">AMA, autosens, autotune</a>
</li>

                    
                        
<li >
    <a href="../../prep/checklist/">Checklist</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Nightscout <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../new_user/">Setup New Site</a>
</li>

                    
                        
<li >
    <a href="../update_user/">Update Site</a>
</li>

                    
                        
<li >
    <a href="../azure_migration/">Azure to Heroku</a>
</li>

                    
                        
<li class="active">
    <a href="./">mLab</a>
</li>

                    
                        
<li >
    <a href="../pushover/">Remote Notifications</a>
</li>

                    
                        
<li >
    <a href="../reports/">Reports</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rig <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../rig/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../rig/assembly/">Rig assembly</a>
</li>

                    
                        
<li >
    <a href="../../rig/flash/">Edison flash</a>
</li>

                    
                        
<li >
    <a href="../../rig/prep/">Edison setup</a>
</li>

                    
                        
<li >
    <a href="../../rig/wifi/">Wifi</a>
</li>

                    
                        
<li >
    <a href="../../rig/troubleshooting/">Troubleshoot</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">openaps <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../myopenaps/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/loop/">Install openaps</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/preferences/">Preferences</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/bt-tether/">BT tether</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/papertrail/">Papertrail</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/IFTTT/">IFTTT</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/alias/">Aliases</a>
</li>

                    
                        
<li >
    <a href="../../myopenaps/troubleshooting/">Troubleshoot</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Use <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../use/overview/">Overview</a>
</li>

                    
                        
<li >
    <a href="../../use/access/">Login to rig</a>
</li>

                    
                        
<li >
    <a href="../../use/openaps-pill/">OpenAPS pill</a>
</li>

                    
                        
<li >
    <a href="../../use/papertrail/">Papertrail</a>
</li>

                    
                        
<li >
    <a href="../../use/carbs/">Carb & Bolus</a>
</li>

                    
                        
<li >
    <a href="../../use/priming/">Priming and Sites</a>
</li>

                    
                        
<li >
    <a href="../../use/exercise/">Exercise</a>
</li>

                    
                        
<li >
    <a href="../../use/cgm/">CGM Tips</a>
</li>

                    
                        
<li >
    <a href="../../use/offline/">Offline Looping</a>
</li>

                    
                        
<li >
    <a href="../../use/travel/">Travel & Time Changes</a>
</li>

                    
                        
<li >
    <a href="../../use/update/">Updating loop</a>
</li>

                    
                        
<li >
    <a href="../../use/multiple-rigs/">Multiple Rigs</a>
</li>

                    
                        
<li >
    <a href="../../use/openhumans/">OpenHumans</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../azure_migration/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../pushover/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#mlab-database-maintenance">mLab Database Maintenance</a></li>
        
            <li><a href="#mlab-direct-access">mLab Direct Access</a></li>
        
            <li><a href="#nightscout-admin-tools">Nightscout Admin Tools</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="mlab-database-maintenance">mLab Database Maintenance</h1>
<p>Regardless of whether you are on Azure or Heroku for Nightscout, you are using an mLab database for storing your Loop data.  mLab allows you to store up to 500 MB for free.  When you hit that data cap, your NS will stop working.  Your Share Bridge will not pull data and your site will be “stale”.  </p>
<p>The good news?  Loop can still run just fine until you cleanout your mLab database.  The bad news?  You just won’t be able to remotely monitor Loop through NS until you clear up some storage space in mLab.</p>
<p>There are two ways to cleanout some space or otherwise get into your mLab database:</p>
<ul>
<li>mLab direct access</li>
<li>Nightscout admin tools</li>
</ul>
<h2 id="mlab-direct-access">mLab Direct Access</h2>
<ul>
<li>
<p>Login to your mLab database.  </p>
<ul>
<li>
<p>If you setup your own Azure site and mLab database, go directly to <a href="http://mlab.com">mLab</a> and login, or</p>
</li>
<li>
<p>If you setup your own Azure site and mLab database, then setup a Heroku account and pointed back to your old mLab database (i.e., copy and pasted the MONGODB_URI from Azure), go directly to <a href="http://mlab.com">mLab</a> and login, or</p>
</li>
<li>
<p>If you setup a Heroku site and let Heroku setup an mLab database for you (which is typical for new Heroku sites), you will access mLab through your Heroku account main page.   Login to your Heroku account and click on the mLab logo as shown below.</p>
</li>
</ul>
</li>
</ul>
<p align="center">
<img src="../img/mlab_link.jpg" width="650">
</p>

<ul>
<li>
<p>(Users coming directly from a Heroku click will see the screen below.  If you had to login to mLab with a name and password, you will first see a line with your MongoDB database.  Click on your database name to see the screen below with all the collection names.) </p>
<p>Your various collections are shown, similar to the screen shot below.  The amount of data each collection is using is listed to the far right of each collection’s line.  I recommend emptying the “loop” collection first and then "devicestatus" to free up database storage.  If you need any of the information in the database, you may want to do a selective delete of data. For example, if you are headed into an endocrinologist appointment and want to print out recent Nightscout reports to take with you. Eventually you may need to empty more collections.  It should be awhile though, as the other collections are significantly smaller and will take a long time to fill.</p>
<p>Click on a collection’s name to open it.</p>
</li>
</ul>
<p align="center">
<img src="../img/collections.jpg" width="650">
</p>

<ul>
<li>Click on the button that says “Delete all documents in collection” and then confirm the deletion.</li>
</ul>
<p align="center">
<img src="../img/delete.jpg" width="650">
</p>

<ul>
<li>You can confirm that your cleanout has resolved the problem, by checking that your database size is below 500 MB now.  Click on the “Home” link in top left.  Then review the size of the database as shown.</li>
</ul>
<p align="center">
<img src="../img/mlab_size.jpg" width="650">
</p>

<h2 id="nightscout-admin-tools">Nightscout Admin Tools</h2>
<p>If you go to your Nightscout site's settings (the three horizontal bars in the upper right of your Nightscout site), you will be able to access your Admin Tools for the site.  These include some useful quick mLab actions, includig deleting documents from the devicestatus collection similar to the action we took in the steps above.  But, it's worth noting that if you have errant future data in your Nightscout site that is causing problems (usually during time changes or overseas travel), you can clean-out future entries through this portal, too.</p>
<p align="center">
<img src="../img/admin_tools.jpg" width="650">
</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>